var Pickl=function(a){var b={};b.form={width:320,height:520},b.config=this.Config,b.theme="zen",b.svg=null,b.callback=function(a){console.log(a)},_.extend(this,b,a),this.themeLoad(),this.render()};Pickl.prototype.Config=function(){var a={};a.name="Orientation",a.values=["righty","lefty"],a.selected=0;var b={};b.name="Instrument",b.values=["guitar","banjo","ukelele"],b.selected=0;var c={};c.name="Strings",c.values=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c.selected=0;var d={};return d.title="Options",d.fields=[a,b,c],d}(),Pickl.prototype.render=function(){this.pickl=this.renderForm(),this.pickl.background=this.renderBackground(),this.pickl.title=this.renderTitle(),this.pickl.close=this.renderClose(),this.pickl.fields=this.renderFields()},Pickl.prototype.renderForm=function(){var a=null===this.svg?Snap(this.form.width,this.form.height):this.svg,b=a.attr("class")+" pickl";return a.attr({"class":b,transform:"translate("+this.form.width+",0)"}),a},Pickl.prototype.renderBackground=function(){var a=this.pickl.rect(0,0,this.form.width,this.form.height);return a.attr({"class":"background"}),a},Pickl.prototype.renderTitle=function(){var a=this.pickl.text(this.form.width/2,50,this.config.title);return a.attr({"class":"title"}),a},Pickl.prototype.renderClose=function(){{var a=this.pickl.g().attr("class","button close"),b=.15*this.form.width/2,c=this.form.height-70,d=.85*this.form.width,e=50;a.rect(b,c,d,e).attr({"class":"touchTarget"}),a.text(this.form.width/2,c+25,"close")}return a.click(this.save,this),a},Pickl.prototype.renderFields=function(){var a=this,b=this.calcLayout().fields,c=this.pickl.g().attr("class","fields"),d=90;return _.each(this.config.fields,function(e,f){{var g=c.g().attr({"class":"field button",transform:"translate("+b.x+","+d+")"});g.rect(0,0,b.width,40).attr({"class":"touchTarget"}),g.text(b.x+70,20,e.name).attr({"class":"title"}),g.text(b.x+80,20,e.values[e.selected]).attr("class","value")}d+=41,g.click(function(){a.displayOptions(f)},a)}),c.selectAll(".field")},Pickl.prototype.renderOptions=function(a){{var b=this,c=b.calcLayout().fields,d=this.pickl.g().attr({"class":"options"}),e=this.config.fields[a],f=(d.rect(0,0,b.form.width,b.form.height).attr("class","background"),d.text(b.form.width/2,27,e.name).attr("class","title options"),d.g().attr({"class":"fields"})),g=e.values[e.selected],h=50,i=c.x-1;this.pickl.fields[a]}return d.attr({transform:"translate("+this.form.width+",0)"}),_.each(e.values,function(j,k){var l=f.g().attr({"class":"field",transform:"translate("+i+","+h+")"}),m=(l.rect(0,0,c.width/2,40).attr({"class":"touchTarget"}),l.text(40,20,j).attr({"class":"value"}),j===g?"check selected":"check"),n=l.g().attr({"class":m}),o=(n.rect(0,0,40,40).attr({"class":"touchTarget"}),n.text(10,20,"*").attr({"class":"value"}));o.node.innerHTML="&#xf00c",h=k%2===0?h:h+41,i=k%2===0?c.width/2+c.x+1:c.x-1,n.click(function(){e.selected=k,d.animate({transform:"translate("+this.form.width+",0)"},200,mina.easeout,function(){this.remove()}),b.pickl.fields[a].select(".value").node.textContent=j},b)}),d},Pickl.prototype.calcLayout=function(){var a={};return a.fields=this.calcFields(),a},Pickl.prototype.calcFields=function(){var a=40,b=.85*this.form.width,c=.15*this.form.width/2;return{height:a,width:b,x:c}},Pickl.prototype.display=function(){this.pickl.animate({transform:"translate(0,0)"},200,mina.easein)},Pickl.prototype.displayOptions=function(a){var b=this.renderOptions(a);b.animate({transform:"translate(0,0)"},200,mina.easin)},Pickl.prototype.save=function(){var a={};_.each(this.config.fields,function(b){a[b.name]=b.values[b.selected]}),this.callback(a),this.pickl.animate({transform:"translate("+this.form.width+",0)"},200,mina.easein)},Pickl.prototype.themes=function(){var a={};return a.plain={},a.plain.background="#e2e2e2",a.plain.fieldset="#666666",a.plain.touchTarget="#f2f2f2",a.plain.touchTargetOver="#000000",a.plain.buttonTextColor="#999999",a.plain.buttonTextColorOver="#e2e2e2",a.plain.buttonStroke="#e2e2e2",a.plain.modalBackground="#f2f2f2",a.zen={},a.zen.background="#000000",a.zen.fieldset="#666666",a.zen.touchTarget="#222222",a.zen.touchTargetOver="#444444",a.zen.titleColor="#FFFFFF",a.zen.buttonTextColor="#999999",a.zen.buttonTextColorOver="#FFFFFF",a.zen.buttonStroke="#333333",a.zen.modalBackground="#000000",a}(),Pickl.prototype.themeLoad=function(){var a=this.themes[this.theme];$(".picklTheme").remove();var b="",c=$("<style>");return c.attr("type","text/css"),c.attr("class","picklTheme"),b+="@font-face {",b+="font-family: 'VarelaRound';",b+="font-style: normal;",b+="font-weight: 400;",b+="src: local('VarelaRound'), local('VarelaRound-Regular'), url(fonts/Varela_Round/VarelaRound-Regular.woff) format('woff');",b+="}",b+=".pickl { font-family:'VarelaRound'; font-size: 1rem; }",b+=".pickl .title { text-transform: uppercase; font-size: 1.5rem; }",b+=".pickl .title.options { font-size: .7rem; opacity: 0.5; }",b+=".pickl .hide { display: none; }",b+=".pickl text { alignment-baseline:central; text-anchor:middle; pointer-events:none; }",b+=".pickl .button { cursor: pointer; font-size: 0.85rem; }",b+=".pickl .button.close { text-transform: uppercase; }",b+=".pickl .button.arrow .touchTarget { stroke:none; }",b+=".pickl .field { font-size: 0.85rem; }",b+=".pickl .field .title { font-size: .7rem; opacity: 0.5; text-anchor: end; }",b+=".pickl .field .value { text-anchor:start; }",b+=".pickl .field .check { font-family:'FontAwesome'; font-size: 1.25rem; text-anchor:middle; opacity: .2; cursor: pointer; }",b+=".pickl .field .check.selected, .pickl .field .check:hover { opacity: 1; }",b+=".pickl .background { fill: "+a.background+"; } ",b+=".pickl .fieldset { fill: "+a.fieldset+"; } ",b+=".pickl .title { fill: "+a.titleColor+";} ",b+=".pickl .field text, .close text { fill:"+a.buttonTextColor+"} ",b+=".pickl .button > .touchTarget, .pickl .field .touchTarget { fill: "+a.touchTarget+"; } ",b+=".pickl .button > .touchTarget { stroke: "+a.buttonStroke+"; } ",b+=".pickl .button:hover .touchTarget { fill: "+a.touchTargetOver+"; cursor:pointer; } ",b+=".pickl .button:hover text { fill: "+a.buttonTextColorOver+"; } ",b+=".pickl .button > .arrow > .touchTarget { fill: "+a.touchTarget+" } ",c.append(b),$("head").append(c),c};